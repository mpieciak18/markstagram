# Markstagram environment sample
#
# This file is a reference list of all env vars currently used by the repo.
# Copy relevant sections into:
# - server/.env
# - client/.env

# =========================
# Server (.env)
# =========================

# Required
DATABASE_URL="postgresql://USER:PASSWORD@HOST/DB_NAME?sslmode=require"
JWT_SECRET="replace-with-a-long-random-secret"
CLIENT_URL="http://localhost:5173"

# Optional defaults
# Database adapter mode:
# - neon (default): uses Neon adapter
# - direct: uses Prisma Postgres adapter (recommended for local Docker tests)
#   requires packages: @prisma/adapter-pg and pg
DATABASE_ADAPTER="neon"
PORT=3001
SOCKET_PORT=3002
NODE_ENV="development"
STAGE="local"
DEFAULT_IMG="https://firebasestorage.googleapis.com/v0/b/ig-clone-5b7ab.appspot.com/o/no-profile-image.png?alt=media&token=c5abba8e-edd1-42ed-89c5-413fae339cce"
CORS_ORIGINS="http://localhost:5173"

# Optional auth abuse protection tuning
AUTH_SIGN_UP_RATE_LIMIT=30
AUTH_SIGN_UP_WINDOW_MS=600000
AUTH_SIGN_IN_RATE_LIMIT=60
AUTH_SIGN_IN_WINDOW_MS=60000
AUTH_SIGN_IN_MAX_FAILED_ATTEMPTS=5
AUTH_SIGN_IN_FAILURE_WINDOW_MS=900000
AUTH_SIGN_IN_LOCKOUT_MS=900000
BCRYPT_SALT_ROUNDS=12

# Optional upload hardening
UPLOAD_MAX_BYTES=5242880
UPLOAD_ALLOWED_MIME_TYPES="image/jpeg,image/png,image/webp,image/gif"

# Optional Firebase Storage integration
# Required only if you want real upload/delete against your own Firebase bucket.
APP_URL="your-firebase-storage-bucket.appspot.com"
GCLOUD_KEY="base64-encoded-service-account-json"

# =========================
# Client (.env)
# =========================

VITE_API_URL="http://localhost:3001"
# Optional. Useful for Bun native server mode where Socket.IO runs on a separate port.
VITE_SOCKET_URL="http://localhost:3002"
VITE_DEFAULT_IMG="https://firebasestorage.googleapis.com/v0/b/ig-clone-5b7ab.appspot.com/o/no-profile-image.png?alt=media&token=c5abba8e-edd1-42ed-89c5-413fae339cce"
