# Markstagram environment sample
#
# This file is a reference list of all env vars currently used by the repo.
# Copy relevant sections into:
# - server/.env
# - client/.env

# =========================
# Server (.env)
# =========================

# Required
DATABASE_URL="postgresql://USER:PASSWORD@HOST/DB_NAME?sslmode=require"
JWT_SECRET="replace-with-a-long-random-secret"
CLIENT_URL="http://localhost:5173"

# Optional defaults
# Database adapter mode:
# - neon (default): uses Neon adapter
# - direct: uses Prisma Postgres adapter (recommended for local Docker tests)
#   requires packages: @prisma/adapter-pg and pg
DATABASE_ADAPTER="neon"
PORT=3001
NODE_ENV="development"
STAGE="local"
DEFAULT_IMG="https://firebasestorage.googleapis.com/v0/b/ig-clone-5b7ab.appspot.com/o/no-profile-image.png?alt=media&token=c5abba8e-edd1-42ed-89c5-413fae339cce"
CORS_ORIGINS="http://localhost:5173"

# Optional auth abuse protection tuning
AUTH_SIGN_UP_RATE_LIMIT=30
AUTH_SIGN_UP_WINDOW_MS=600000
AUTH_SIGN_IN_RATE_LIMIT=60
AUTH_SIGN_IN_WINDOW_MS=60000
AUTH_SIGN_IN_MAX_FAILED_ATTEMPTS=5
AUTH_SIGN_IN_FAILURE_WINDOW_MS=900000
AUTH_SIGN_IN_LOCKOUT_MS=900000
BCRYPT_SALT_ROUNDS=12
# Test-only: allow lower bcrypt rounds when NODE_ENV=test.
ENABLE_FAST_BCRYPT_FOR_TESTS=0

# Optional upload hardening
UPLOAD_MAX_BYTES=5242880
UPLOAD_ALLOWED_MIME_TYPES="image/jpeg,image/png,image/webp,image/gif"

# Optional websocket hardening
WS_AUTH_TIMEOUT_MS=5000
WS_MAX_FRAME_BYTES=32768

# Optional test performance toggle
# Set to 1 to silence per-request logs during tests.
DISABLE_REQUEST_LOGGING=0
# Set to 1 to force local/no-op cloud storage behavior (recommended for tests).
MOCK_CLOUD_STORAGE=0

# Optional Firebase Storage integration
# Required only if you want real upload/delete against your own Firebase bucket.
APP_URL="your-firebase-storage-bucket.appspot.com"
GCLOUD_KEY="base64-encoded-service-account-json"

# =========================
# Client (.env)
# =========================

VITE_API_URL="http://localhost:3001"
# Optional explicit WS URL. Defaults to VITE_API_URL with /ws and ws:// or wss:// protocol.
VITE_WS_URL="ws://localhost:3001/ws"
VITE_DEFAULT_IMG="https://firebasestorage.googleapis.com/v0/b/ig-clone-5b7ab.appspot.com/o/no-profile-image.png?alt=media&token=c5abba8e-edd1-42ed-89c5-413fae339cce"
